name: Check code style

on: [push, pull_request]   # yamllint disable-line rule:truthy

jobs:
  style-check:

    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v6
        with:
          fetch-depth: 1
          show-progress: false
      # - name: Install markdownlint-cli2
      - run: sudo apt-get -qqy install npm
        env:
          DEBIAN_FRONTEND: noninteractive
      - run: npm install --quiet markdownlint-cli2 --global
      - name: Install shfmt
        run: sudo apt-get install -qyy shfmt
        env:
          DEBIAN_FRONTEND: noninteractive
      - name: make showvars
        run: make showvars
      - run: make html-style-check
      - run: make markdown-style-check
      - run: make perl-style-check
      - run: make python-style-check python-typecheck
      - run: make shell-style-check
      - run: make yaml-style-check
      - name: make style-check
        run: make style-check
